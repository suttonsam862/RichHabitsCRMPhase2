cr:
  title: "Short title of the change"
  rationale: "Why this change is needed / business value"
  domain_delta:
    - entity: Organization
      add_field:
        name: color_palette
        type: string[]
        constraints:
          - "maxItems: 12"
          - "each is hex or HSL"
  db_migration:
    id: "2025-08-22-001_add_org_color_palette"
    sql:
      - "ALTER TABLE public.organizations ADD COLUMN IF NOT EXISTS color_palette jsonb NOT NULL DEFAULT '[]'::jsonb;"
  api_delta:
    - path: "POST /api/organizations"
      request_body_patch:
        add: "color_palette: string[]"
      response_patch:
        add: "color_palette: string[]"
  ui_delta:
    - form: "organizations.create"
      add_field:
        key: "color_palette"
        type: "chips-multi"
        validation: "array of hex/HSL"
  tests:
    - "DB: insert org w/ color_palette and SELECT round-trip"
    - "API: POST returns color_palette; GET lists it"
    - "UI: form validates bad values; max 12"
  safety_checks:
    - "TypeScript compile clean"
    - "ESLint clean"
    - "RLS probe: creator can read new org"
notes: |
  Anything else the reviewer/AI should know.
